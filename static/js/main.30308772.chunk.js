(this["webpackJsonptaxi-poisson"]=this["webpackJsonptaxi-poisson"]||[]).push([[0],{12:function(e,t,a){e.exports=a(21)},17:function(e,t,a){},21:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=(a(17),a(4)),o=a(2),u=a(23),m=a(1),s=m.a.create({lane:{width:"100%",background:"#454545",position:"relative",height:10}}),f=function(){var e=r.a.useState(0),t=Object(c.a)(e,2),a=t[0],n=t[1],l=r.a.useState([]),i=Object(c.a)(l,2),o=i[0],u=i[1],f=r.a.useState(0),p=Object(c.a)(f,2),d=p[0],h=p[1],b=r.a.useRef(),g=r.a.useCallback((function(e){n(e/100),e>d&&(u(o.concat(e/100+10).filter((function(t){return e/100-t<110}))),h(-Math.log(Math.random())/5e-4+e)),b.current=requestAnimationFrame(g)}),[o,d]);return r.a.useEffect((function(){return b.current=requestAnimationFrame(g),function(){return cancelAnimationFrame(b.current)}}),[g]),r.a.createElement("div",{className:Object(m.b)(s.lane)},o.map((function(e,t){return r.a.createElement("span",{key:t,role:"img","aria-label":"taxi",style:{position:"absolute",right:"".concat(a-e,"%"),bottom:-7}},"\ud83d\ude95")})))},p=m.a.create({container:{display:"flex",fontSize:12,fontFamily:"inconsolata",fontWeight:500,fontStyle:"normal"},lane:{width:"100%",position:"relative",borderBottom:"1px solid #eee",overflow:"hidden"},stats:{width:70,paddingLeft:5,paddingRight:20,textAlign:"right"}}),d=function(e){var t=e.arrivals,a=(Math.max.apply(Math,Object(o.a)(t))-Math.min.apply(Math,Object(o.a)(t)))/(t.length-1),n=Math.min.apply(Math,Object(o.a)(t.filter((function(e){return e>50})))),l=Math.max.apply(Math,Object(o.a)(t.filter((function(e){return e<=50}))));return r.a.createElement("div",{className:Object(m.b)(p.container)},r.a.createElement("div",{className:Object(m.b)(p.lane)},t.map((function(e,t){return r.a.createElement("span",{key:t,role:"img","aria-label":"taxi",style:{position:"absolute",right:"".concat(e,"%"),opacity:e===n||e===l?1:.4,width:7}},"\ud83d\ude95")})),r.a.createElement("span",{style:{position:"absolute",left:"50%",borderLeft:"1px solid #ddd"}},"\xa0"),r.a.createElement("span",{style:{position:"absolute",right:"50%",left:"".concat(100-n,"%"),background:"#558cf4",opacity:.2,bottom:"40%",top:"40%"}},"\xa0"),r.a.createElement("span",{style:{position:"absolute",left:"50%",right:"".concat(l,"%"),background:"#c13c3d",opacity:.2,bottom:"40%",top:"40%"}},"\xa0")),r.a.createElement("div",{className:Object(m.b)(p.stats)},a.toFixed(3)),r.a.createElement("div",{className:Object(m.b)(p.stats)},(n-l).toFixed(3)))},h=m.a.create({container:{position:"relative",height:150},bar:{position:"absolute",bottom:0}}),b=function(e){var t=e.taxiArrivals,a=t.flatMap((function(e){return e.map((function(e,t,a){return 0===t?null:a[t]-a[t-1]}))})).filter((function(e){return null!=e})),n=t.map((function(e){return Math.min.apply(Math,Object(o.a)(e.filter((function(e){return e>50}))))-Math.max.apply(Math,Object(o.a)(e.filter((function(e){return e<=50}))))}));console.log(n);var l=Array(80).fill().map((function(e,t){return t})),i=l.map((function(e,t){return a.filter((function(a){return a<e&&a>l[t-1]})).length})),c=l.map((function(e,t){return n.filter((function(a){return a<e&&a>l[t-1]})).length}));console.log(c);var u=140/Math.max.apply(Math,Object(o.a)(i)),s=70/Math.max.apply(Math,Object(o.a)(c));return r.a.createElement("div",{className:Object(m.b)(h.container)},i.map((function(e,t){return r.a.createElement("span",{key:t,className:Object(m.b)(h.bar),style:{background:"#6eb563",height:e*u,width:5,left:5*t}})})),c.map((function(e,t){return r.a.createElement("span",{key:t,className:Object(m.b)(h.bar),style:{background:"#da743a",height:e*s,width:5,left:5*t,opacity:.6}})})))},g=m.a.create({header:{backgroundColor:"#282c34",minHeight:"10vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",fontSize:"calc(10px + 2vmin)",color:"white",overflow:"hidden"},simHeader:{display:"flex",justifyContent:"flex-end",fontSize:12,fontFamily:"inconsolata",fontWeight:500,fontStyle:"normal"},stats:{width:70,paddingLeft:5,paddingRight:20,textAlign:"right"}}),y=function e(t){var a=Math.max.apply(Math,[-100].concat(Object(o.a)(t)))+-Math.log(Math.random())/.1;return a>100&&t.length?t.concat(a):e(t.concat(a))};var E=function(){var e=r.a.useState(Array(10).fill().map((function(e){return y([])}))),t=Object(c.a)(e,2),a=t[0],n=t[1],l=a.map((function(e){return Math.min.apply(Math,Object(o.a)(e.filter((function(e){return e>50}))))-50})),i=a.map((function(e){return 50-Math.max.apply(Math,Object(o.a)(e.filter((function(e){return e<=50}))))})),s=a.map((function(e){return Math.min.apply(Math,Object(o.a)(e.filter((function(e){return e>50}))))-Math.max.apply(Math,Object(o.a)(e.filter((function(e){return e<=50}))))}));return r.a.createElement("div",null,r.a.createElement("header",{className:Object(m.b)(g.header)},r.a.createElement("span",{role:"img","aria-label":"person"},"\ud83d\ude4b")," ",r.a.createElement(f,null)),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("p",{style:{margin:20}},r.a.createElement(u.a,{onClick:function(){n(Array(100).fill().map((function(e){return y([])})))}},"Simulate 100")),r.a.createElement("p",{style:{margin:20}},r.a.createElement(u.a,{onClick:function(){n(Array(1e3).fill().map((function(e){return y([])})))}},"Simulate 1000"))),r.a.createElement("div",{className:"col-4"},r.a.createElement("table",{style:{margin:20}},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Average wait time:"),r.a.createElement("td",{style:{color:"#c13c3d"}},(i.reduce((function(e,t){return e+t}),0)/l.length).toFixed(3))),r.a.createElement("tr",null,r.a.createElement("td",null,"Average miss time:"),r.a.createElement("td",{style:{color:"#558cf4"}},(l.reduce((function(e,t){return e+t}),0)/l.length).toFixed(3))),r.a.createElement("tr",null,r.a.createElement("td",null,"Average inter-arrival time:"),r.a.createElement("td",{style:{color:"#6eb563"}},(a.map((function(e){return(Math.max.apply(Math,Object(o.a)(e))-Math.min.apply(Math,Object(o.a)(e)))/(e.length-1)})).reduce((function(e,t){return e+t}),0)/a.length).toFixed(3))),r.a.createElement("tr",null,r.a.createElement("td",{width:220},"Average interval while waiting:"),r.a.createElement("td",{style:{color:"#da743a"}},(s.reduce((function(e,t){return e+t}),0)/s.length).toFixed(3)))))),r.a.createElement("div",{className:"col-4"},r.a.createElement(b,{taxiArrivals:a})))),r.a.createElement("div",{className:Object(m.b)(g.simHeader)},r.a.createElement("div",null),r.a.createElement("div",{className:Object(m.b)(g.stats)},"Avg interval"),r.a.createElement("div",{className:Object(m.b)(g.stats)},"Wait interval")),a.map((function(e,t){return r.a.createElement(d,{key:t,arrivals:e})})))};a(20);i.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[12,1,2]]]);
//# sourceMappingURL=main.30308772.chunk.js.map